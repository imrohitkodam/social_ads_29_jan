function show_hide_others(){var e=techjoomla.jQuery("ul#selections_country > li").length;e>1||0==e?techjoomla.jQuery("#geo_others").hide("fast"):1==e&&techjoomla.jQuery("#geo_others").show("fast")}function ltrim(e){for(var o=0;o<e.length&&" "==e[o];)o++;return e.substring(o,e.length)}function rtrim(e){for(var o=e.length-1;o>0&&" "==e[o];)o-=1;return e.substring(0,o+1)}function trim(e){return ltrim(rtrim(e))}function dosplit(e){return(e=(e=e.replace(/^.(\s+)?/,"")).replace(/(\s+)?.$/,"")).split("||")}function add_tag(e,o){var t=techjoomla.jQuery("#"+e+"_hidden").val();t?(hidden_values=dosplit(t),"-1"==techjoomla.jQuery.inArray(o,hidden_values)&&hidden_values.push(o),val_to_push=hidden_values.join("||")):val_to_push=o,techjoomla.jQuery("#"+e+"_hidden").val("|"+val_to_push+"|")}function remove_li(e,o,t){var i=new Array;i=dosplit(document.getElementById(e+"_hidden").value);for(var l=0;l<i.length;l++)if(""!=i[l]&&trim(i[l])==t){removeByIndex(i,l);break}val_to_push=i.join("||"),val_to_push=i.join("||"),val_to_push?techjoomla.jQuery("#"+e+"_hidden").val("|"+val_to_push+"|"):techjoomla.jQuery("#"+e+"_hidden").val(""),techjoomla.jQuery("#selection-"+e+"_"+o).remove(),show_hide_others()}function removeByIndex(e,o){e.splice(o,1)}techjoomla.jQuery(function(){var e="";techjoomla.jQuery(".selections").click(function(){var e=this.id.split("_");techjoomla.jQuery("#"+e[1]).focus(),techjoomla.jQuery("#"+e[1]).val("")}).focusout(function(){var e=this.id.split("_");techjoomla.jQuery("#"+e[1]).val("")}),techjoomla.jQuery("input[name=geo_type]").change(function(){"everywhere"==techjoomla.jQuery("input[name=geo_type]:checked").val()?(techjoomla.jQuery(".byregion_ul").hide(),techjoomla.jQuery(".bycity_ul").hide()):"byregion"==techjoomla.jQuery("input[name=geo_type]:checked").val()?(techjoomla.jQuery(".byregion_ul").show(),techjoomla.jQuery(".bycity_ul").hide()):(techjoomla.jQuery(".byregion_ul").hide(),techjoomla.jQuery(".bycity_ul").show())}),techjoomla.jQuery(".geo_fields").bind("keypress",function(e,o){(e.which<97||e.which>122)&&(e.which<65||e.which>90)&&""!=trim(this.value)&&32!=e.which&&45!=e.which&&8!=e.which&&e.preventDefault()}),techjoomla.jQuery(".geo_fields").autocomplete({minLength:0,source:function(o,t){if(o.term){var i=techjoomla.jQuery(".geo_fields_hidden").serializeArray();techjoomla.jQuery.ajax({url:root_url+"index.php?option=com_sa&task=create.findGeolocations&element="+this.element[0].id+"&request_term="+o.term,type:"POST",data:i,dataType:"json",success:function(i){var l,r;""!=i&&(e=i),t(techjoomla.jQuery.ui.autocomplete.filter(e,(l=o.term,(r=l,r.split(/,\s*/)).pop())))}})}},focus:function(){return!1},select:function(o,t){this.value="";var i='<li class="selection" id="selection-'+this.id+"_"+techjoomla.jQuery(this).index()+'">';return i+='<a class="close" id="close-'+techjoomla.jQuery(this).index()+'" onclick="remove_li(\''+this.id+"',"+techjoomla.jQuery(this).index()+",'"+t.item.value+"');\">×</a>"+t.item.value+"</li>",techjoomla.jQuery(this).before(i),e="",add_tag(this.id,t.item.value),show_hide_others(),!1}}),techjoomla.jQuery(".geo_fields").attr("autocomplete","nope")}),techjoomla.jQuery(function(){if("1"==document.getElementById("editview").value){techjoomla.jQuery("input[name=geo_type]").change();var e=techjoomla.jQuery(".geo_fields");terms=new Array,e.each(function(){terms=dosplit(techjoomla.jQuery(this).val());for(var e=0;e<terms.length;e++)if(terms[e]){var o='<li class="selection" id="selection-'+this.id+"_"+e+'">';o+='<a class="close" id="close-'+e+'" onclick="remove_li(\''+this.id+"',"+e+",'"+terms[e]+"');\">×</a>"+terms[e]+"</li>",techjoomla.jQuery(this).before(o),this.value="",add_tag(this.id,terms[e])}}),show_hide_others()}});