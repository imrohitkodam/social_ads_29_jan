/*
 * @version    SVN:<SVN_ID>
 * @package    SocialAds
 * @author     Techjoomla <extensions@techjoomla.com>
 * @copyright  Copyright (c) 2009-2015 TechJoomla. All rights reserved
 * @license    GNU General Public License version 2, or later
 */
var statesListBackup,csrfToken,isActive=0;if(void 0===techjoomla)var techjoomla={};void 0===techjoomla.jQuery&&(techjoomla.jQuery=jQuery);var sa={ajax:function(e,t){techjoomla.jQuery.ajax({url:"index.php",data:e}).done(t)},initSaJs:function(){techjoomla.jQuery(document).ready((function(){techjoomla.jQuery("#clear-search-button").on("click",(function(){techjoomla.jQuery("#filter_search").val(""),techjoomla.jQuery("#adminForm").submit()}))}))},checkForZeroAndAlpha:function(e,t,o){e.value&&0!=e.value?sa.ad_checkforalpha(e,t,o):0==e.value&&(techjoomla.jQuery("#html-container").hide(),techjoomla.jQuery('input[name ="payment_gateway"]')[0].checked=!1,Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_PAYMENT_MIN_AMT_SHOULD_GREATER_MSG")]}),e.value="")},ad_checkforalpha:function(e,t,o){t=void 0===t?"":t;var a=0;for(a=0;a<e.value.length;a++)if(e.value.charCodeAt(a)<=47||e.value.charCodeAt(a)>=58||45==e.value.charCodeAt(a)){if(t!=e.value.charCodeAt(a))return Joomla.renderMessages({error:[o]}),e.value=e.value.substring(0,a),!1}return!0},validateCoupon:function(e){if(techjoomla.jQuery("#sa_coupon_chk").is(":checked")&&""==techjoomla.jQuery("#sa_coupon_code").val())return alert(Joomla.JText._("COM_SOCIALADS_ENTER_COP_COD")),e.preventDefault()},create:{initCreateJs:function(){techjoomla.jQuery(document).ready((function(){techjoomla.jQuery("#url2").blur((function(){jQuery("#url2").css("border-color","")}));var e=document.getElementById("ad_creator_id").value;sa.create.getPromoterPlugins(e),sa.create.initStepsJs()}))},initStepsJs:function(){techjoomla.jQuery(document).ready((function(){techjoomla.jQuery("#btnWizardNext").on("click",(function(){techjoomla.jQuery("#system-message-container").hide(),techjoomla.jQuery("#MyWizard").wizard("next","foo")})),techjoomla.jQuery("#MyWizard").on("change",(function(e,t){techjoomla.jQuery("#sa_BillForm").length?values=techjoomla.jQuery("#adsform,#sa_BillForm").serialize():values=techjoomla.jQuery("#adsform").serialize();var o=techjoomla.jQuery("#sa-steps li[class='active']")[0].id,a=0;if(1==addMoreCredit&&(a=document.querySelector("input[name='add_more_credit']:checked").value),"next"===t.direction){var n="";if(techjoomla.jQuery(":radio[name=unlimited_ad]").length>0&&(n=techjoomla.jQuery("input[name=unlimited_ad]:radio:checked").val()),!sa.create.validateCreateForm(o,n))return!1;loadingImage(),techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.autoSave&stepId="+o+"&tmpl=component",type:"POST",async:!1,data:values,dataType:"json",beforeSend:function(){},complete:function(){},success:function(r){if("ad-design"==o&&"next"===t.direction){if(1===techjoomla.jQuery("#sa_accpt_terms").length&&!1===techjoomla.jQuery("#sa_accpt_terms").is(":checked"))return alert(Joomla.JText._("COM_SOCIALADS_ACCEPT_TERMS")),e.preventDefault();var l=0,i=0;if(techjoomla.jQuery("#altadbutton").length&&1==document.getElementById("altadbutton").checked&&(l=1),techjoomla.jQuery("#adtype").length&&"affiliate"==document.getElementById("adtype").value&&(i=1),1==l||1==i)return window.location.assign(Joomla.getOptions("system.paths").base+"/index.php?option=com_socialads&task=create.cleanup"),e.preventDefault();if(1==isAdmin){var m=document.getElementById("ad_creator_id_ad").value;"wallet_mode"===selected_pricing_mode&&sa.create.getUserCampaign(m)}}if("ad-pricing"==o&&"next"===t.direction){if(1==n)return window.location.assign(Joomla.getOptions("system.paths").base+"/index.php?option=com_socialads&task=create.cleanup"),e.preventDefault();r.camp_id&&newCampaignSelect(r.camp_id)}var d=techjoomla.jQuery("#"+o).next();if(d=d.attr("id"),techjoomla.jQuery("input[name='geo_type']").click((function(){let e=techjoomla.jQuery(this).attr("id");"byregion"===e?(techjoomla.jQuery("#region_hidden").attr("value",""),techjoomla.jQuery("#selections_region").find("li").remove()):"bycity"===e?(techjoomla.jQuery("#city_hidden").attr("value",""),techjoomla.jQuery("#selections_city").find("li").remove()):"everywhere"===e&&(techjoomla.jQuery("#region_hidden").attr("value",""),techjoomla.jQuery("#city_hidden").attr("value",""),techjoomla.jQuery("#selections_region").find("li").remove(),techjoomla.jQuery("#selections_city").find("li").remove())})),"ad-targeting"==o&&"next"===t.direction){let t=techjoomla.jQuery("#country_hidden").val(),o=techjoomla.jQuery("#region_hidden").val(),a=techjoomla.jQuery("#city_hidden").val(),n=techjoomla.jQuery("input[name='geo_type']:checked").attr("id");if("1"===techjoomla.jQuery("input[name='geo_targett']:checked").val()){if(""===t)return alert(Joomla.JText._("COM_SOCIALADS_GEO_TARGETING_COUNTRY_REQUIRED")),e.preventDefault();if("byregion"===n&&""===o)return alert(Joomla.JText._("COM_SOCIALADS_GEO_TARGETING_REGION_REQUIRED")),e.preventDefault();if("bycity"===n&&""===a)return alert(Joomla.JText._("COM_SOCIALADS_GEO_TARGETING_CITY_REQUIRED")),e.preventDefault()}}if("ad-targeting"==o&&0==allowWholeAdEdit||0==showTargeting&&0==allowWholeAdEdit){if(1==addMoreCredit&&0==a)return window.location.assign(Joomla.getOptions("system.paths").base+"/index.php?option=com_socialads&task=create.cleanup"),e.preventDefault();if(1==allowWholeAdEdit)return window.location.assign(Joomla.getOptions("system.paths").base+"/index.php?option=com_socialads&task=create.cleanup"),e.preventDefault()}if(r.billingDetail&&techjoomla.jQuery(".sa_build_ad_billing").html(r.billingDetail),"ad-billing"==d&&sa.validateCoupon(e),r.payAndReviewHtml){techjoomla.jQuery("#ad_reviewAndPayHTML").html(r.payAndReviewHtml),1===jQuery('input[name ="ad_gateways"]').length&&(jQuery('input[name ="ad_gateways"]')[0].checked=!0,jQuery('input[name ="ad_gateways"]').attr("checked","checked").trigger("change"))}r.adPreviewHtml&&techjoomla.jQuery("#adPreviewHtml").html(r.adPreviewHtml),r.initialFeeWarning&&alert(r.initialFeeWarning),techjoomla.jQuery("#"+o+"-error").hide("slow")},error:function(t,a,n){return alert("Something went wrong! Please try again."),techjoomla.jQuery("#"+o+"-error").show("slow"),console.log("jqXHR:"),console.log(t),console.log("textStatus:"),console.log(a),console.log("errorThrown:"),console.log(n),e.preventDefault()}}),setTimeout((function(){hideImage()}),10)}techjoomla.jQuery("html,body").animate({scrollTop:techjoomla.jQuery("#sa-steps").offset().top}),1===t.step&&t.direction})),techjoomla.jQuery("#MyWizard").on("changed",(function(e,t){sa.create.changenexttoexit(0);var o=techjoomla.jQuery("#sa-steps li[class='active']");if(stepthisactive=o[0].id,stepthisactive==techjoomla.jQuery("#sa-steps li").first().attr("id")?techjoomla.jQuery(".sa-form #btnWizardPrev").hide():techjoomla.jQuery(".sa-form #btnWizardPrev").show(),stepthisactive==techjoomla.jQuery("#sa-steps li").last().attr("id")){techjoomla.jQuery(".sa-form .prev_next_wizard_actions").hide();"ad-summery"==stepthisactive&&techjoomla.jQuery('#sa_payHtmlDiv div.form-actions input[type="submit"]').addClass("pull-right"),"ad-review"==stepthisactive&&techjoomla.jQuery(".ad_reviewAdmainContainer div.form-actions").prepend('<button id="btnWizardPrev1" onclick="techjoomla.jQuery(\'#MyWizard\').wizard(\'previous\');"\ttype="button" class="btn btn-prev" > <i class="icon-circle-arrow-left icon-white"></i>Prev</button>')}else techjoomla.jQuery(".sa-form .prev_next_wizard_actions").show();var a=techjoomla.jQuery("input[name=unlimited_ad]:radio:checked").val();if("ad-targeting"==stepthisactive&&0==allowWholeAdEdit||"ad-pricing"==stepthisactive&&1==a){var n=0;1==addMoreCredit&&(n=document.querySelector("input[name='add_more_credit']:checked").value),1==addMoreCredit&&1==n?sa.create.changenexttoexit(0):(allowWholeAdEdit,sa.create.changenexttoexit(1)),"ad-targeting"==stepthisactive&&(1==addMoreCredit&&0==n||1!=allowWholeAdEdit&&sa.create.changenexttoexit(0))}})),techjoomla.jQuery("#MyWizard").on("finished",(function(e,t){})),techjoomla.jQuery("#btnWizardPrev").on("click",(function(){techjoomla.jQuery("#MyWizard").wizard("previous")})),techjoomla.jQuery("#btnWizardStep").on("click",(function(){techjoomla.jQuery("#MyWizard").wizard("selectedItem")})),techjoomla.jQuery("#MyWizard").on("stepclick",(function(e,t){t.step})),techjoomla.jQuery("#btnStep2").on("click",(function(e,t){techjoomla.jQuery("[data-target=#step2]").trigger("click")})),sa.create.calculateTotal()}))},calculateReach:function(){var e=techjoomla.jQuery(".sa-fields-inputbox").serializeArray(),t=techjoomla.jQuery("#config_estimated_reach").val();techjoomla.jQuery.ajax({type:"POST",url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.calculateReach",data:e,dataType:"json",success:function(e){if(null!=e){var o=0;isNaN(t)&&(t=0);var a=parseInt(t)+parseInt(e.reach);o=0==parseInt(a)?0:a,isNaN(o)&&(o=0),techjoomla.jQuery("#estimated_reach").html(Joomla.JText._("COM_SOCIALADS_SOCIAL_ESTIMATED_REACH_HEAD")+" "+o+"  "+Joomla.JText._("COM_SOCIALADS_SOCIAL_ESTIMATED_REACH_END"))}}})},cancelCreate:function(){if(1==isAdmin){if(!0!==confirm(Joomla.JText._("COM_SOCIALADS_CANCEL_AD")))return!1;window.location.assign(Joomla.getOptions("system.paths").base+"/index.php?option=com_socialads&view=forms")}else{if(!0!==confirm(Joomla.JText._("COM_SOCIALADS_CANCEL_AD")))return!1;window.location.assign(cancelUrl)}},getUserCampaign:function(e){jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.getUserCampaigns&userid="+e,type:"POST",dataType:"json",success:function(e){if(e.length>1)var t="<option value=''>"+Joomla.JText._("COM_SOCIALADS_SELECT_CAMPAIGN")+"</option>";var o;for(select=techjoomla.jQuery("#ad_campaign"),select.find("option").remove().end(),select.append(t),o=0;o<e.length;++o){var a;if((a=e[o]).id==camp_id){t="<option selected value="+a.id+">"+a.campaign+"</option>";techjoomla.jQuery("#ad_campaign").append(t),techjoomla.jQuery("#new_campaign").addClass("d-none")}else{t="<option value="+a.id+">"+a.campaign+"</option>";techjoomla.jQuery("#ad_campaign").append(t),techjoomla.jQuery("#new_campaign").addClass("d-none")}}jQuery("select").trigger("liszt:updated")},error:function(){console.log("Someting went wrong")}})},paymentListShowHide:function(){var e=document.getElementById("sa_paymentlistWrapper");document.getElementById("sa_termsCondCk").checked?e.style.display="block":e.style.display="none"},changeAdType:function(){switch(document.getElementById("adtype").value&&techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.getZones&a_type="+document.getElementById("adtype").value,type:"GET",dataType:"json",success:function(e){techjoomla.jQuery("#zone").html("");var t=document.getElementById("ad_zone_id").value;if(techjoomla.jQuery("#zone").append('<option disabled="disabled" value="" selected>'+Joomla.JText._("COM_SOCIALADS_AD_SELECT_ZONE")+"</option>"),""==e)return alert("There are no Zones created for this Ad type!!"),void techjoomla.jQuery("#adtype option:selected").next("option").attr("selected","selected");for(i=0;i<e.length;i++)parseInt(e[i].zone_id)==parseInt(t)?techjoomla.jQuery("#zone").append('<option value="'+e[i].zone_id+'" selected>'+e[i].zone_name.replace(/<[^>]*>/g,"")+"</option>"):techjoomla.jQuery("#zone").append('<option value="'+e[i].zone_id+'" >'+e[i].zone_name.replace(/<[^>]*>/g,"")+"</option>");techjoomla.jQuery("select").trigger("liszt:updated"),"affiliate"!=document.getElementById("adtype").value?(techjoomla.jQuery("#body").removeAttr("style"),sa.create.getZonesData(selected_pricing_mode)):"affiliate"==document.getElementById("adtype").value&&techjoomla.jQuery("#ad_zone_id").val(techjoomla.jQuery("#zone option:selected").val()),techjoomla.jQuery("select").trigger("liszt:updated")}}),null!=techjoomla.jQuery("#upload_area").find("div").children("[name=upimg]").val()&&techjoomla.jQuery("#upimg").val(techjoomla.jQuery("#upload_area").find("div").children("[name=upimg]").val()),document.getElementById("adtype").value){case"media":case"html5_zip":techjoomla.jQuery("#ad_img_name").show(),techjoomla.jQuery("#ad_img_box").show(),techjoomla.jQuery("#ad_title_name").show(),techjoomla.jQuery("#ad_title_box").show(),techjoomla.jQuery(".sa_charlimit").show(),techjoomla.jQuery("#ad_body_name").hide(),techjoomla.jQuery("#ad_body_box").hide(),techjoomla.jQuery("#layout_div").show(),techjoomla.jQuery("#sa_preview").show(),techjoomla.jQuery("#defaulturl").show();break;case"text":techjoomla.jQuery("#ad_title_name").show(),techjoomla.jQuery("#ad_title_box").show(),techjoomla.jQuery("#ad_body_name").show(),techjoomla.jQuery("#ad_body_box").show(),techjoomla.jQuery("#ad_img_name").hide(),techjoomla.jQuery("#ad_img_box").hide(),techjoomla.jQuery(".sa_charlimit").show(),techjoomla.jQuery("#max_tit1").show(),techjoomla.jQuery("#max_body1").show(),techjoomla.jQuery("#layout_div").show(),techjoomla.jQuery("#sa_preview").show(),techjoomla.jQuery("#defaulturl").show();break;case"text_media":techjoomla.jQuery("#ad_title_name").show(),techjoomla.jQuery("#ad_title_box").show(),techjoomla.jQuery("#ad_body_name").show(),techjoomla.jQuery("#ad_body_box").show(),techjoomla.jQuery("#ad_img_name").show(),techjoomla.jQuery("#ad_img_box").show(),techjoomla.jQuery(".sa_charlimit").show(),techjoomla.jQuery("#max_tit1").show(),techjoomla.jQuery("#max_body1").show(),techjoomla.jQuery("#layout_div").show(),techjoomla.jQuery("#sa_preview").show(),techjoomla.jQuery("#defaulturl").show();break;case"affiliate":techjoomla.jQuery("#defaulturl").hide(),techjoomla.jQuery("#ad_body_name").show(),techjoomla.jQuery("#ad_body_box").show(),techjoomla.jQuery("#max_body1").hide(),techjoomla.jQuery("#ad_body_chars").hide(),techjoomla.jQuery("#body").height(221),techjoomla.jQuery("#body").width(198),techjoomla.jQuery("#body").removeAttr("maxlength"),techjoomla.jQuery("#ad_title_name").show(),techjoomla.jQuery("#ad_title_box").show(),techjoomla.jQuery(".sa_charlimit").hide(),techjoomla.jQuery("#max_tit1").hide(),techjoomla.jQuery("#ad_title_chars").hide(),techjoomla.jQuery("#ad_img_name").hide(),techjoomla.jQuery("#ad_img_box").hide(),techjoomla.jQuery("#layout_div").hide(),techjoomla.jQuery("#sa_preview").hide()}switchCheckboxalt()},getZonesData:function(e){techjoomla.jQuery("#ad_zone_id").val(techjoomla.jQuery("#zone option:selected").val());var t=document.getElementById("zone").value;t&&techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.getZonesData&zone_id="+t,type:"GET",dataType:"json",success:function(t){if(techjoomla.jQuery("#layout1").html(""),techjoomla.jQuery(".max_tit").val(t[0].max_title),"affiliate"!=document.getElementById("adtype").value&&techjoomla.jQuery(".max_body").val(t[0].max_des),techjoomla.jQuery("#max_tit1").text(t[0].max_title),"affiliate"!=document.getElementById("adtype").value&&(techjoomla.jQuery("#max_body1").text(t[0].max_des),techjoomla.jQuery("#ad_title_chars").show(),techjoomla.jQuery("#ad_body_chars").show(),techjoomla.jQuery(".sa_charlimit").show()),techjoomla.jQuery("#ad_title").attr("maxlength",t[0].max_title),"affiliate"!=document.getElementById("adtype").value&&techjoomla.jQuery("#body").attr("maxlength",t[0].max_des),sa.create.countChars("ad_title","ad_title_charsText","{CHAR}"+Joomla.JText._("COM_SOCIALADS_CHAR_REMAINING"),techjoomla.jQuery("#max_tit").val(),techjoomla.jQuery("#ad_title").val(),""),"affiliate"!=document.getElementById("adtype").value&&sa.create.countChars("body","ad_body_charsText","{CHAR}"+Joomla.JText._("COM_SOCIALADS_CHAR_REMAINING"),techjoomla.jQuery("#max_body").val(),techjoomla.jQuery("#body").val(),""),"affiliate"!=document.getElementById("adtype").value){for(techjoomla.jQuery("#img_wid").text(t[0].img_width),techjoomla.jQuery("#img_ht").text(t[0].img_height),ad_layout_nm=selected_layout,i=0;i<t[0].layout.length;i++)sel="",(ad_layout_nm==t[0].layout[i]||0==i)&&(sel="checked"),bootstrap_version=document.getElementById("bootstrap_version").value,5==parseFloat(bootstrap_version)?techjoomla.jQuery("#layout1").append('<span class="layout_span col-lg-8 col-md-8 col-sm-12 col-xs-12"><input class="layout_radio" type="radio" name="layout" value="'+t[0].layout[i]+'" '+sel+' onclick="sa.create.changeLayout(this.value)" ><img class="layout_radio" src="'+t[0].base+"plugins/socialadslayout/"+t[0].layout[i]+"/"+t[0].layout[i]+'/layout.png" ></span>'):techjoomla.jQuery("#layout1").append('<span class="layout_span span8"><input class="layout_radio" type="radio" name="layout" value="'+t[0].layout[i]+'" '+sel+' onclick="sa.create.changeLayout(this.value)" ><img class="layout_radio" src="'+t[0].base+"plugins/socialadslayout/"+t[0].layout[i]+"/"+t[0].layout[i]+'/layout.png" ></span>'),"checked"==sel&&sa.create.changeLayout(t[0].layout[i]),null!=techjoomla.jQuery("#upload_area").find("div").children("[name=upimg]").val()&&techjoomla.jQuery("#upimg").val(techjoomla.jQuery("#upload_area").find("div").children("[name=upimg]").val());""!=document.getElementById("ad_image").value&&"text"!=document.getElementById("adtype").value&&ajaxUpload(document.adsform,"&filename=ad_image","upload_area","IMG_UP<br /><img src='"+root_url+"/media/com_sa/images/loader_light_blue.gif' width='128' height='15' border='0' />","<img src='/media/com_sa/images/error.gif' width='16' height='16' border='0' /> Error in Upload, check settings and path info in source code."),"media"==document.getElementById("adtype").value&&1==t[0].layout.length?techjoomla.jQuery("#layout_div").hide():techjoomla.jQuery("#layout_div").show(),techjoomla.jQuery("#pric_imp").val(t[0].per_imp),techjoomla.jQuery("#pric_click").val(t[0].per_click),techjoomla.jQuery("#pric_day").val(t[0].per_day),techjoomla.jQuery("#pric_month").val(t[0].per_month),null!==document.getElementById("totalamount")&&"wallet_mode"==e&&""!=document.getElementById("totalamount").value&&caltotal(),sa.create.getZonePriceForInfo()}}})},getZonePriceForInfo:function(){},changeLayout:function(rad){null!=techjoomla.jQuery("#upload_area").find("div").children("[name=upimg]").val()&&techjoomla.jQuery("#upimg").val(techjoomla.jQuery("#upload_area").find("div").children("[name=upimg]").val());var adtype=""+document.getElementById("adtype").value,zone=document.getElementById("zone").options[document.getElementById("zone").selectedIndex].value.replace(/<[^>]*>/g,"");techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.changeLayout&layout="+rad+"&title="+techjoomla.jQuery("#ad_title").val().replace(/<[^>]*>/g,"")+"&body="+techjoomla.jQuery("#body").val().replace(/<[^>]*>/g,"")+"&img="+techjoomla.jQuery("#upimg").val()+"&a_type="+adtype+"&a_zone="+zone+"&params="+techjoomla.jQuery("#params").val(),type:"GET",dataType:"json",success:function(data){if(!document.getElementById(rad+"css")){var head=document.getElementsByTagName("head")[0],link=document.createElement("link");link.id=rad+"css",link.rel="stylesheet",link.type="text/css",link.href=data.css,link.media="all",head.appendChild(link)}document.getElementById("preview_sa").innerHTML=data.html,data.js&&eval(data.js)},error:function(e){}})},countChars:function(e,t,o,a,n,r){if(9!=r.keyCode&&("ad_title"==e?techjoomla.jQuery("#preview_sa").find(".preview-title").text(n):techjoomla.jQuery("#preview_sa").find(".preview-bodytext").text(n)),"affiliate"!=document.getElementById("adtype").value){var l=getObject(e),i=getObject(t),m=a-l.value.length;if(m<=0){m=0;var d=o.replace("{CHAR}",m);techjoomla.jQuery("#"+t).html('<span class="text-error"> '+d+" </span>"),l.value=l.value.substr(0,a),""!=document.getElementById("adtype").value&&""!=document.getElementById("zone").value||alert(Joomla.JText._("COM_SOCIALADS_ENTERING_TITLE_ERROR"))}else i.innerHTML=o.replace("{CHAR}",m),techjoomla.jQuery("#"+t).show()}},getPaymentGatewayHtml:function(e,t,o,a,n){techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=payment.getPaymentGatewayHtml&payPerAd="+o+"&gateway="+e+"&order_id="+t+"&tmpl=component",type:"POST",data:"",dataType:"text",beforeSend:function(){techjoomla.jQuery("#sa_paymentGatewayList").after('<div class="com_socialad_ajax_loading"><div class="com_socialad_ajax_loading_text">'+a+' ...</div><img class="com_socialad_ajax_loading_img" src="'+root_url+'media/com_sa/images/ajax.gif"></div>')},complete:function(){techjoomla.jQuery(".com_socialad_ajax_loading").remove()},success:function(e){if(e){techjoomla.jQuery("#sa_payHtmlDiv").html(e),techjoomla.jQuery('#sa_payHtmlDiv div.form-actions input[type="submit"]').addClass("pull-right");techjoomla.jQuery("#sa_payHtmlDiv div.form-actions").prepend('<button id="btnWizardPrev1" onclick="techjoomla.jQuery(\'#MyWizard\').wizard(\'previous\');"\ttype="button" class="btn btn-primary pull-left" > <i class="icon-circle-arrow-left icon-white" ></i>Prev</button>')}}})},getStatesList:function(e,t,o){var a=techjoomla.jQuery("#"+e).val();if(null==a)return!1;techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=checkout.loadState&country="+a+"&tmpl=component",type:"GET",dataType:"json",success:function(a){"country"==e&&(statesListBackup=a),sa.create.generateStatesOptions(a,e,t,o)}})},generateStatesOptions:function(e,t,o,a){var n,r;techjoomla.jQuery("#"+t).val();r=techjoomla.jQuery("#state"),default_opt=a,r.find("option").remove().end(),selected='selected="selected"';var l="<option "+selected+' value="">'+default_opt+"</option>";if(techjoomla.jQuery("#state").append(l),e)for(e.options,n=0;n<e.length;++n){var i=e[n];selected="",i.id==o&&(selected='selected="selected"');l="<option "+selected+' value="'+i.id+'">'+i.region+"</option>";techjoomla.jQuery("#state").append(l),techjoomla.jQuery("#state").trigger("liszt:updated")}},getPromoterPlugins:function(e){techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.getPromoterPlugins&tmpl=component&uid="+e,type:"GET",dataType:"json",success:function(e){techjoomla.jQuery("#promote_plg_select ").html(e.html),techjoomla.jQuery("select").trigger("liszt:updated")},error:function(e,t,o){alert("Something went wrong! Please try again."),console.log("jqXHR:"),console.log(e),console.log("textStatus:"),console.log(t),console.log("errorThrown:"),console.log(o)}})},insertUrl:function(){document.getElementById("addatapluginlist").value="";document.getElementById("promotplugin").style.display="none",techjoomla.jQuery("#destination_url").show()},populatePromotePlgList:function(){techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.getPromotePluginPreviewData&id="+techjoomla.jQuery(".promotplglist").val(),type:"GET",dataType:"json",success:function(e){techjoomla.jQuery("#upload_area").html(e.image),techjoomla.jQuery("#upimg").val(e.imagesrc),techjoomla.jQuery("#addataad_url1").val(e.url1),techjoomla.jQuery("#url2").val(e.url2),techjoomla.jQuery("#upimgcopy").val(e.imagesrc),techjoomla.jQuery("#ad_title").val(e.title),techjoomla.jQuery("#body").val(e.bodytext),techjoomla.jQuery("#ad_img_label").text(Joomla.JText._("COM_SOCIALADS_PROMOTE_PLUGIN_AD_UPLOAD_MEDIA")),e.params&&techjoomla.jQuery("#params").val(e.params),sa.create.changeLayout(techjoomla.jQuery("input[name=layout]:radio:checked").val())}})},validateCreateForm:function(e,t){var o,a=document.getElementById("url2").value;o=a.indexOf("http://"),urlpointer1=a.indexOf("https://");var n=0,r="";if(0==o){var l=a.substr(7);document.getElementById("url2").value=l}else if(0==urlpointer1){l=a.substr(8);document.getElementById("url2").value=l}if(null!=jQuery("#upload_area").find("div").children("[name=upimg]").val()&&jQuery("#upimg").val(jQuery("#upload_area").find("div").children("[name=upimg]").val()),"text_media"==document.getElementById("adtype").value||"text"==document.getElementById("adtype").value||"media"==document.getElementById("adtype").value||"html5_zip"==document.getElementById("adtype").value){var i=document.adsform.url2.value;if(""==i&&(techjoomla.jQuery("#url2").css("border-color","red"),r=r+Joomla.JText._("COM_SOCIALADS_URL_VALID")+"\n",n=1),1!=n&&!i.match(/^[\s]*[A-Za-z0-9]+([\-\.]{1}[A-Za-z0-9]+)*\.[A-Za-z]{2,5}(:[0-9]{1,5})?(\/.*)?[\s]*$/))return techjoomla.jQuery("#url2").css("border-color","red"),alert(Joomla.JText._("COM_SOCIALADS_URL_VALID")),!1}if("text_media"!=document.getElementById("adtype").value&&"text"!=document.getElementById("adtype").value&&"html5_zip"!=document.getElementById("adtype").value&&"affiliate"!=document.getElementById("adtype").value||""==document.getElementById("ad_title").value&&(r=r+Joomla.JText._("COM_SOCIALADS_TITLE_VALID")+"\n",techjoomla.jQuery("#ad_title").css("border-color","red"),n=1),"text_media"!=document.getElementById("adtype").value&&"text"!=document.getElementById("adtype").value&&"affiliate"!=document.getElementById("adtype").value||""==document.getElementById("body").value&&(r=r+Joomla.JText._("COM_SOCIALADS_BODY_VALID")+"\n",techjoomla.jQuery("#body").css("border-color","red"),n=1),"media"!=document.getElementById("adtype").value&&"text_media"!=document.getElementById("adtype").value&&"html5_zip"!=document.getElementById("adtype").value||""==document.getElementById("ad_image").value&&""==document.getElementById("upimg").value&&(r=r+Joomla.JText._("COM_SOCIALADS_MEDIA_VALID")+"\n",techjoomla.jQuery(".uneditable-input").css("border-color","red"),n=1),1==n)return alert(r),!1;if("ad-pricing"==e&&0==t&&!sa.create.pricingValidations(camp_currency_daily,selected_pricing_mode,sa_minimum_charge,sa_minimum_charge_msg,currency,sa_invalid_date_msg,sa_ad_date_need_msg,sa_wrong_dates_msg,sa_invalid_credits_msg,sa_chk_contextual_msg))return!1;if("ad-billing"==e&&techjoomla.jQuery("#sa_BillForm").length){var m=document.sa_BillForm;if(!document.formvalidator.isValid(m))return!1}return!0},pricingValidations:function(e,t,o,a,n,r,l,i,m,d){var c=document.getElementById("url2").value;if(0==c.indexOf("http://")){var u=c.substr(7);document.getElementById("url2").value=u}if("wallet_mode"==t)return!!sa.create.walletModeValidation(e,n)&&(""!=document.getElementById("pricing_opt").value||(alert(Joomla.JText._("COM_SOCIALADS_AD_PRICING_OPTION")),document.getElementById("pricing_opt").focus(),!1));var s=document.adsform,_=s.totaldisplay.value,y=s.totalamount.value,h=s.datefrom.value,j=document.getElementById("chargeoption").value,p="";if(techjoomla.jQuery(":radio[name=unlimited_ad]").length>0&&(p=techjoomla.jQuery("input[name=unlimited_ad]:radio:checked").val()),parseInt(j)>=2&&1!=p){if(" "==h&&2==parseInt(j))return alert(l),!1;var g=new Date,v=g.getFullYear(),f=g.getMonth()+1,E=g.getDate();if(E>=1&&E<=9)var I="0"+E;else I=E;if(f>=1&&f<=9)var A="0"+f;else A=f;if(today=v+"-"+A+"-"+I,!techjoomla.jQuery("#datefrom").hasClass("while-adding-more-days")&&h<today)return alert(i),!1;var Q=document.getElementById("totaldays").value;if(isNaN(Q)||Q<=0)return alert(r),document.getElementById("totaldays").focus(),!1}if(2!=parseInt(j)&&1!=p&&parseInt(j)<2){if(""==_)return alert(m),document.getElementById("totaldisplay").focus(),!1;if(isNaN(_)||_<=0)return alert(m),document.getElementById("totaldisplay").focus(),!1}return!(parseFloat(y)<parseFloat(o))||(alert(a),document.getElementById("totaldisplay").focus(),!1)},walletModeValidation:function(e,t){var o=document.getElementById("ad_campaign").value;if(techjoomla.jQuery("#new_campaign").hasClass("d-none")){if("0"==o||""==o)return alert(Joomla.JText._("COM_SOCIALADS_AD_SELECT_CAMPAIGN")),document.getElementById("ad_campaign").focus(),!1}else{var a=document.getElementById("camp_name").value,n=document.getElementById("camp_amount").value;if(""==a&&("0"==o||""==o))return alert(Joomla.JText._("COM_SOCIALADS_AD_ENTER_CAMPAIGN")),document.getElementById("camp_name").focus(),!1;if(a&&""==n||a&&parseFloat(n)<parseFloat(e))return alert(minimumBalence),document.getElementById("camp_amount").focus(),!1}return!0},switchCheckboxguest:function(e,t){techjoomla.jQuery("#guestbutton").is(":checked")&&techjoomla.jQuery("#altadbutton").attr("checked",!1)},switchCheckboxalt:function(){var e=0,t=0;if(techjoomla.jQuery("#altadbutton").is(":checked")&&(techjoomla.jQuery("#guestbutton").attr("checked",!1),e=1),"affiliate"==document.getElementById("adtype").value)t=1;1==e||1==t||0==showTargeting&&0==allowWholeAdEdit?sa.create.changenexttoexit(1):sa.create.changenexttoexit(0)},changenexttoexit:function(e){1==e?(techjoomla.jQuery(".prev_next_wizard_actions #btnWizardNext").removeClass("btn-primary"),techjoomla.jQuery(".prev_next_wizard_actions #btnWizardNext").addClass("btn-success"),techjoomla.jQuery(".prev_next_wizard_actions #btnWizardNext span").text(savenexitbtn_text)):(techjoomla.jQuery(".prev_next_wizard_actions #btnWizardNext span").text(savennextbtn_text),techjoomla.jQuery(".prev_next_wizard_actions #btnWizardNext").addClass("btn-primary"),techjoomla.jQuery(".prev_next_wizard_actions #btnWizardNext").removeClass("btn-success")),1==addMoreCredit&&0==e?techjoomla.jQuery("#sa_ad_more_credit_radio").show():techjoomla.jQuery("#sa_ad_more_credit_radio").hide()},hideNewCampaign:function(){document.getElementById("camp_name").value="",document.getElementById("camp_amount").value="",techjoomla.jQuery("#new_campaign").addClass("d-none")},showNewCamp:function(){0==isActive?(document.getElementById("ad_campaign").disabled=!0,document.getElementById("campaignDetails").style.display="none",techjoomla.jQuery("#ad_campaign").val(techjoomla.jQuery("#ad_campaign option:first").val()),techjoomla.jQuery("#new_campaign").removeClass("d-none"),document.getElementById("click").style.display="none",document.getElementById("imps").style.display="none",techjoomla.jQuery(".newCampBtnText").addClass("d-none"),techjoomla.jQuery(".existCampBtnText").removeClass("d-none"),isActive=1):(0!=techjoomla.jQuery("#ad_campaign > option").length&&(document.getElementById("ad_campaign").disabled=!1),techjoomla.jQuery("#new_campaign").addClass("d-none"),techjoomla.jQuery(".existCampBtnText").addClass("d-none"),techjoomla.jQuery(".newCampBtnText").removeClass("d-none"),isActive=0)},getZonePricing:function(){var e=0,t=0,o=document.getElementById("pricing_opt"),a=(document.getElementById("bid_div"),o.options[o.selectedIndex].value);0!=sa_zone_pricing?(e=document.getElementById("pric_click").value,t=document.getElementById("pric_imp").value):0==sa_zone_pricing&&(e=sa_price_per_clicks,t=sa_price_per_impressions),jQuery("#click_span").html(Joomla.JText._("COM_SOCIALADS_RATE_PER_CLICK")+getFormattedPrice(e,currency)),jQuery("#imps_span").html(Joomla.JText._("COM_SOCIALADS_RATE_PER_IMP")+getFormattedPrice(t,currency)),1==a?(document.getElementById("click").style.display="block",document.getElementById("imps").style.display="none"):0==a?(document.getElementById("imps").style.display="block",document.getElementById("click").style.display="none"):4==a&&(document.getElementById("imps").style.display="block",document.getElementById("click").style.display="block")},showCoupon:function(){techjoomla.jQuery("#sa_coupon_chk").is(":checked")?techjoomla.jQuery("#sa_cop_tr").show():(techjoomla.jQuery(".sa_cop_details").hide(),techjoomla.jQuery("#sa_cop_tr").hide(),techjoomla.jQuery("#sa_coupon_code").val(""))},applyCoupon:function(e,t){void 0===t?t=csrfToken:csrfToken=t,techjoomla.jQuery("#sa_coupon_chk").is(":checked")&&(""==techjoomla.jQuery("#totalamount").val()?alert(Joomla.JText._("COM_SOCIALADS_TOTAL_SHOULDBE_VALID_VALUE")):""==techjoomla.jQuery("#sa_coupon_code").val()?1==e&&alert(Joomla.JText._("COM_SOCIALADS_ENTER_COP_COD")):techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=payment.getcoupon&"+t+"=1&coupon_code="+document.getElementById("sa_coupon_code").value,type:"GET",dataType:"json",success:function(e){if(techjoomla.jQuery('input[name ="sa_cop"]').keyup((function(){""==techjoomla.jQuery("#sa_coupon_code").val()&&techjoomla.jQuery(".sa_cop_details").hide()})),e.not_exists)return alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_EXISTS")),void techjoomla.jQuery("#sa_coupon_code").val("");if(e.unpublished)return alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_UNPUBLISHED")),void techjoomla.jQuery("#sa_coupon_code").val("");if(e.expired)return alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_EXPIRED")),void techjoomla.jQuery("#sa_coupon_code").val("");if(e.max_use_exceeded)return alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_MAX_USE_EXCEEDED")),void techjoomla.jQuery("#sa_coupon_code").val("");if(e.max_use_per_user_exceeded)return alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_MAX_USE_PER_USER_EXCEEDED")),void techjoomla.jQuery("#sa_coupon_code").val("");if(e.not_started)return alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_NOT_YET_ACTIVE")),void techjoomla.jQuery("#sa_coupon_code").val("");var t,o=0,a=techjoomla.jQuery("#totalamount").val();o=1==e[0].val_type?e[0].value/100*a:e[0].value,(t=sa.create.round(a-o))<0?alert(Joomla.JText._("COM_SOCIALADS_COP_CODE_CANT_APPLIED")):(techjoomla.jQuery(".sa_cop_details").show(),techjoomla.jQuery("#sa_cop_price").html(getFormattedPrice(t,currency)),techjoomla.jQuery("#sa_cop_afterprice").html(getFormattedPrice(o,currency)),techjoomla.jQuery("#dis_cop").html(getFormattedPrice(o,currency)))},error:function(e,t,o){alert(techjoomla.jQuery("#sa_coupon_code").val()+" "+Joomla.JText._("COM_SOCIALADS_COP_EXISTS")),techjoomla.jQuery("#sa_coupon_code").val("")}}))},addOption:function(e){for(i=0;i<e.length;i++){alert(valuecurrentgatewayliststr),-1==valuecurrentgatewayliststr.search(e[i].value)&&jQuery("#gateway").append(jQuery("<option/>",{value:e[i].value,text:e[i].name}))}},removeOption:function(e){for(i=0;i<e.length;i++)jQuery('#gateway option[value="'+e[i].value+'"]').remove()},round:function(e){return Math.round(100*e+(1e3*e%10>4?1:0))/100},calculateTotal:function(){var e=0,t=0,o=0,a=0,n=0;let r=document.getElementById("totaldisplay");if(null!==document.getElementById("chargeoption")&&(e=document.getElementById("chargeoption").value),0!==sa_zone_pricing?(t=document.getElementById("pric_click").value,o=document.getElementById("pric_day").value,a=document.getElementById("pric_imp").value):0===sa_zone_pricing&&(t=sa_price_per_clicks,o=sa_price_per_day,a=sa_price_per_impressions),null!=r&&""!==(n=r.value)){if(!Number.isInteger(parseInt(n)))return alert(sa_invalid_credits_msg),void(n=r.value="");n=r.value=parseInt(n)}if(null!==document.getElementById("gateway"))var l=document.getElementById("gateway").value;if(null!==document.getElementById("total_days_label")&&(jQuery("#sa_recuring").is(":checked"),document.getElementById("total_days_label").innerHTML=Joomla.JText._("COM_SOCIALADS_AD_NUMBER_OF")+" "+jQuery("#chargeoption option:selected").text()),l){if("1"==document.getElementById("chargeoption").value)document.getElementById("total_days").style.display="none",document.getElementById("priceperdate").style.display="none",document.getElementById("priceperclick").style.display="",""==n?(document.getElementById("ad_totalamount").innerHTML="",document.getElementById("currency").innerHTML=""):(amt1=sa.create.round(n*t),initialFee&&needToPayInitialFee&&!addedInitialFee&&(amt1+=Number(initialFee),jQuery(".totalPriceWithPlatformFee").removeClass("d-none")),document.getElementById("ad_totalamount").innerHTML=amt1,document.getElementById("totalamount").value=amt1,document.getElementById("currency").innerHTML=currency,document.getElementById("hcurrency").value=currency,document.getElementById("hrate").value="");else if("0"==document.getElementById("chargeoption").value)document.getElementById("total_days").style.display="none",document.getElementById("priceperdate").style.display="none",document.getElementById("priceperclick").style.display="",""==n?(document.getElementById("ad_totalamount").innerHTML="",document.getElementById("currency").innerHTML=""):(amt1=sa.create.round(n*a),initialFee&&needToPayInitialFee&&!addedInitialFee&&(amt1+=Number(initialFee),jQuery(".totalPriceWithPlatformFee").removeClass("d-none")),document.getElementById("ad_totalamount").innerHTML=amt1,document.getElementById("totalamount").value=amt1,document.getElementById("currency").innerHTML=currency,document.getElementById("hcurrency").value=currency,document.getElementById("hrate").value="");else if("2"==document.getElementById("chargeoption").value){document.getElementById("total_days").style.display="",document.getElementById("priceperclick").style.display="none",document.getElementById("total_days_label").innerHTML=sa_per_day_msg;var m=0;if(document.getElementById("ad_chargeoption_day")&&(m=document.getElementById("ad_chargeoption_day").value),m)if(" "==document.getElementById("totaldays").value)document.getElementById("ad_totalamount").innerHTML="",document.getElementById("currency").innerHTML="";else{var d=document.getElementById("totaldays").value;document.getElementById("ad_totaldays").value=d,amt1=sa.create.round(d*o),initialFee&&needToPayInitialFee&&!addedInitialFee&&(amt1+=Number(initialFee),jQuery(".totalPriceWithPlatformFee").removeClass("d-none")),document.getElementById("ad_totalamount").innerHTML=amt1,document.getElementById("totalamount").value=amt1,document.getElementById("currency").innerHTML=currency,document.getElementById("hcurrency").value=currency,document.getElementById("hrate").value=""}else if(document.getElementById("priceperdate").style.display=""," "==document.getElementById("datefrom").value||""==document.getElementById("totaldays").value)document.getElementById("ad_totalamount").innerHTML="",document.getElementById("currency").innerHTML="";else d=document.getElementById("totaldays").value,document.getElementById("ad_totaldays").value=d,amt1=sa.create.round(d*o),initialFee&&needToPayInitialFee&&!addedInitialFee&&(amt1+=Number(initialFee),jQuery(".totalPriceWithPlatformFee").removeClass("d-none")),document.getElementById("ad_totaldays").value=d,document.getElementById("totaldays").innerHTML=d,document.getElementById("ad_totalamount").innerHTML=amt1,document.getElementById("totalamount").value=amt1,document.getElementById("currency").innerHTML=currency,document.getElementById("hcurrency").value=currency,document.getElementById("hrate").value=""}else{if(document.getElementById("priceperdate").style.display="",document.getElementById("total_days").style.display="",document.getElementById("priceperclick").style.display="none"," "==document.getElementById("datefrom").value||""==document.getElementById("totaldays").value)document.getElementById("ad_totalamount").innerHTML="",document.getElementById("currency").innerHTML="";else{var c=slabs_json,u=jQuery.parseJSON(c);for(i=0;i<u.length;i++)if(parseInt(u[i].duration)==parseInt(e)){amt1=u[i].price,d=u[i].duration;break}d=document.getElementById("totaldays").value,amt1=sa.create.round(d*amt1),document.getElementById("totalamtspan").innerHTML=Joomla.JText._("TOTAL"),document.getElementById("ad_totaldays").value=d,document.getElementById("ad_totalamount").innerHTML=amt1,document.getElementById("totalamount").value=amt1,document.getElementById("currency").innerHTML=currency,document.getElementById("hcurrency").value=currency,document.getElementById("hrate").value=""}}sa.create.applyCoupon(0)}},calculatePoints:function(){document.getElementById("totalamount").value;var e=document.getElementById("totaldisplay").value;if(document.getElementById("gateway").value){var t=document.getElementById("chargeoption").value;jQuery.ajax({url:root_url+"?option=com_sa&task=payment.getpoints&plugin_name="+document.getElementById("gateway").value,success:function(o){var a=o.split("|");if(jpoints=a[0],jconver=a[1],document.getElementById("jpoints").value=jpoints,""==e&&"2"!=t)parseInt(t)<="2"&&(document.getElementById("ad_totalamount").innerHTML="",document.getElementById("currency").innerHTML="");else if(jpoints<0)document.getElementById("rate").innerHTML="",sa.create.calculateTotal();else{document.getElementById("ad_totalamount").innerHTML="<big>"+Math.round(amt1*jconver)+"</big>",document.getElementById("totalamount").value=Math.round(amt1*jconver);var n=document.getElementById("jpoints").value;""==n&&(n=0),document.getElementById("currency").innerHTML="<big>"+Joomla.JText._("POINT")+"</big><small><i>"+Joomla.JText._("POINTS_AVAILABLE")+" "+n+" "+Joomla.JText._("POINT")+"</i></small>",document.getElementById("hcurrency").value="<big>"+Joomla.JText._("POINT")+"</big><small><i>"+Joomla.JText._("POINTS_AVAILABLE")+" "+n+" "+Joomla.JText._("POINT")+"</i></small>",document.getElementById("rate").innerHTML=jconver+Joomla.JText._("POINT")+" = 1 "+currency,document.getElementById("hrate").value=jconver+" "+Joomla.JText._("POINT")+" = 1 "+currency}}})}}},ads:{submitButtonAction:function(e){if("ads.publish"==e||"ads.unpublish"==e)Joomla.submitform(e);else if("ads.delete"==e){if(1!=confirm(Joomla.JText._("COM_SOCIALADS_DELETE_AD")))return}else window.location="index.php?option=com_socialads&view=ads";document.adminForm;Joomla.submitform(e)},deleteItem:function(){var e=techjoomla.jQuery(this).attr("data-item-id");confirm(Joomla.JText._("COM_SOCIALADS_DELETE_MESSAGE"))&&(window.location.href=url+e)}},campaigns:{submitButtonAction:function(e){if("campaigns.publish"==e||"campaigns.unpublish"==e)Joomla.submitform(e);else if("campaigns.delete"==e){if(1!=confirm(Joomla.JText._("COM_SOCIALADS_CAMPAIGNS_DELETE_CONFIRM")))return}else window.location="index.php?option=com_socialads&view=campaigns";document.adminForm;Joomla.submitform(e)},deleteItem:function(){var e=techjoomla.jQuery(this).attr("data-item-id");confirm(Joomla.JText._("COM_SOCIALADS_DELETE_MESSAGE"))&&(window.location.href=url+e)}},payment:{reloadPayment:function(){techjoomla.jQuery(".make-payment-page").length&&(Number(techjoomla.jQuery("#jform_amount").val())<Number(min_pre_balance)?(alert(Joomla.JText._("COM_SOCIALADS_MINIMUM_AMOUNT_ERROR")+min_pre_balance),techjoomla.jQuery(".showNextTab").prop("disabled",!0),techjoomla.jQuery(".showNextTab").addClass("disabled")):(techjoomla.jQuery(".showNextTab").prop("disabled",!1),techjoomla.jQuery(".showNextTab").removeClass("disabled"))),jQuery("input[name=payment_gateway]:checked").length>0&&sa.payment.makePayment(document.querySelector('input[name="payment_gateway"]:checked').value)},applyCoupon:function(jtoken){var cal=document.getElementById("jform_amount").value,coupon_code=document.getElementById("jform_coupon_code").value;Joomla.removeMessages(),""==techjoomla.jQuery("#jform_coupon_code").val()?Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALAD_PAYMENT_ENTER_COUPON_CODE")]}):techjoomla.jQuery.ajax({url:"?option=com_sa&task=payment.getcoupon&"+jtoken+"=1&coupon_code="+coupon_code,type:"GET",dataType:"json",success:function(e){if(null!==e){if(e.not_exists)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_COP_EXISTS")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.unpublished)return Joomla.renderMessages({error:[coupon_code+" "+Joomla.JText._("COM_SOCIALADS_COP_UNPUBLISHED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.expired)return Joomla.renderMessages({error:[coupon_code+Joomla.JText._("COM_SOCIALADS_COP_EXPIRED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.max_use_exceeded)return Joomla.renderMessages({error:[coupon_code+" "+Joomla.JText._("COM_SOCIALADS_COP_MAX_USE_EXCEEDED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.max_use_per_user_exceeded)return Joomla.renderMessages({error:[coupon_code+" "+Joomla.JText._("COM_SOCIALADS_COP_MAX_USE_PER_USER_EXCEEDED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.not_started)return Joomla.renderMessages({error:[coupon_code+" "+Joomla.JText._("COM_SOCIALADS_COP_NOT_YET_ACTIVE")]}),void techjoomla.jQuery("#coupon_code").val("");if(e[0]&&1==e[0].val_type)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALAD_PAYMENT_COUPON_CODE_IN_PERCENT")]}),!1;var t=e[0].value;amt=sa.payment.round(cal-t),amt<=0&&(amt=0),techjoomla.jQuery("#coupon_value").html(getFormattedPrice(t,currency)),techjoomla.jQuery("#coupon_discount").hasClass("hidePaymentFields")?techjoomla.jQuery("#coupon_discount").show():techjoomla.jQuery("#coupon_discount").removeClass("d-none"),techjoomla.jQuery("#dis_amt").html(getFormattedPrice(amt,currency)),techjoomla.jQuery("#dis_amt1").hasClass("hidePaymentFields")?techjoomla.jQuery("#dis_amt1").show():techjoomla.jQuery("#dis_amt1").removeClass("d-none"),0==amt?(techjoomla.jQuery("#pay_gateway").hide(),techjoomla.jQuery("#coupon").html('<input type="button" class="button btn btn-primary" id="add_coupon" value="'+submit+'" onclick="sa.payment.AddCouponPayment(\''+coupon_code+"','"+cal+"')\">"),techjoomla.jQuery("#coupon_div").show(),techjoomla.jQuery("#coupon_div").removeClass("d-none")):(techjoomla.jQuery("#pay_gateway").show(),techjoomla.jQuery("#coupon_div").hide(),techjoomla.jQuery("#coupon_div").addClass("d-none"))}else Joomla.renderMessages({error:[document.getElementById("jform_coupon_code").value+" "+Joomla.JText._("COM_SOCIALADS_PAYMENT_COUPON_NOT_EXISTS")]}),document.getElementById("coupon_code").value=""},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");alert(err.Message)}})},makePayment:function(e){var t=document.getElementById("jform_amount").value,o=document.getElementById("jform_amount").getAttribute("min");document.getElementById("jform_coupon_code").value;if(jQuery('input[name="jform[coupon_result]"]').length)var a=jQuery('input[name="jform[coupon_result]"]:checked').val();else a=jQuery('input[name="coupon_result"]:checked').val();var n=0;return t<o?(Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_PAYMENT_MIN_AMT_TO_PAY")+o]}),document.getElementById("jform_amount").focus(),!1):(Joomla.removeMessages(),""==t||isNaN(t)?(Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_PAYMENT_ENTER_CORRECT_AMT")]}),document.getElementById("jform_amount").focus(),techjoomla.jQuery("#jform_amount").val(""),!1):(techjoomla.jQuery(".taxValue").length&&techjoomla.jQuery(".taxValue").text()&&(n=techjoomla.jQuery(".taxValue").text()),techjoomla.jQuery("#html-container").show(),void techjoomla.jQuery.ajax({url:"?option=com_sa&task=payment.makePayment&processor="+e+"&amount="+t+"&cop="+document.getElementById("jform_coupon_code").value+"&cop_dis_opn_hide="+a+"&tax="+n,type:"GET",dataType:"html",beforeSend:function(){var e=Joomla.JText._("COM_SOCIALAD_PAYMENT_GATEWAY_LOADING_MSG");techjoomla.jQuery("#pay_gateway").after('<div class="com_socialad_ajax_loading"><div class="com_socialad_ajax_loading_text">'+e+' ...</div><img class="com_socialad_ajax_loading_img" src="'+imgpath+'"></div>')},complete:function(){techjoomla.jQuery(".com_socialad_ajax_loading").remove()},success:function(e){e.toString().search("coupon_discount_all")>-1&&(window.location.href="index.php?option=com_socialads&view=payment"),techjoomla.jQuery("#html-container").html(e)}})))},round:function(e){return Math.round(100*e+(1e3*e%10>4?1:0))/100},showCoupon:function(e,t){var o=document.getElementById("jform_amount").value;return""==o||isNaN(o)?(alert(Joomla.JText._("COM_SOCIALADS_PAYMENT_ENTER_CORRECT_AMT")),document.getElementById("jform_amount").focus(),techjoomla.jQuery("input[name=jform\\[coupon_result\\]]:checked").val([0]),!1):parseInt(o)<parseInt(t)?(Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALAD_PAYMENT_AMOUNT_NEEDS_TO_PAY")+t]}),document.getElementById("jform_amount").focus(),techjoomla.jQuery("input[name=jform\\[coupon_result\\]]:checked").val([0]),!1):void(1==e?techjoomla.jQuery("#couponHide").show():(techjoomla.jQuery("#coupon_discount").hasClass("hidePaymentFields")?techjoomla.jQuery("#coupon_discount").hide():techjoomla.jQuery("#coupon_discount").addClass("d-none"),techjoomla.jQuery("#couponHide").hide(),techjoomla.jQuery("#dis_amt1").hasClass("hidePaymentFields")?techjoomla.jQuery("#dis_amt1").hide():techjoomla.jQuery("#dis_amt1").addClass("d-none")))},AddCouponPayment:function(e,t){techjoomla.jQuery.ajax({url:"?option=com_sa&task=payment.addCouponPayment&coupon_code="+e+"&value="+t,type:"GET",dataType:"json",success:function(e){0!=e&&(window.location=Joomla.getOptions("system.paths").base+"/index.php?option=com_socialads&view=wallet")}})}},wallet:{applyCouponCode:function(e){var t=document.getElementById("coupon_code").value;""==jQuery("#coupon_code").val()?Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALAD_PAYMENT_ENTER_COUPON_CODE")]}):jQuery.ajax({url:"?option=com_sa&task=payment.getcoupon&"+e+"=1&coupon_code="+t,type:"GET",dataType:"json",success:function(e){if(null!==e){if(e.not_exists)return Joomla.renderMessages({error:[t+" "+Joomla.JText._("COM_SOCIALADS_COP_EXISTS")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.unpublished)return Joomla.renderMessages({error:[t+" "+Joomla.JText._("COM_SOCIALADS_COP_UNPUBLISHED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.expired)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_COP_EXPIRED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.max_use_exceeded)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_COP_MAX_USE_EXCEEDED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.max_use_per_user_exceeded)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_COP_MAX_USE_PER_USER_EXCEEDED")]}),void techjoomla.jQuery("#coupon_code").val("");if(e.not_started)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALADS_COP_NOT_YET_ACTIVE")]}),void techjoomla.jQuery("#coupon_code").val("");if(e[0]&&1==e[0].val_type)return Joomla.renderMessages({error:[Joomla.JText._("COM_SOCIALAD_PAYMENT_COUPON_CODE_IN_PERCENT")]}),!1;var o=e[0].value;sa.wallet.addCouponPayment(t,o)}else Joomla.renderMessages({error:[document.getElementById("coupon_code").value+" "+Joomla.JText._("COM_SOCIALADS_PAYMENT_COUPON_NOT_EXISTS")]}),document.getElementById("coupon_code").value=""}})},addCouponPayment:function(e,t){jQuery.ajax({url:"?option=com_sa&task=payment.addCouponPayment&coupon_code="+e+"&value="+t,type:"GET",dataType:"json",success:function(e){null!==e?alert(Joomla.JText._("COM_SOCIALADS_WALLET_COUPON_ADDED_SUCCESS")):alert(Joomla.JText._("COM_SOCIALADS_WALLET_COUPON_NOT_ADDED")),window.location="?option=com_socialads&view=wallet"}})}},registration:{submitButtonAction:function(e){document.adminForm;sa.registration.submitform(e)},submitform:function(e){e&&(document.adminForm.task.value=e),"function"==typeof document.adminForm.onsubmit&&document.adminForm.onsubmit(),document.adminForm.submit()}}},saAdmin={ajax:function(e,t,o,a){techjoomla.jQuery.ajax({url:e,type:t,data:o}).done(a)},initSaJs:function(){techjoomla.jQuery(document).ready((function(){techjoomla.jQuery("#clear-search-button").on("click",(function(){techjoomla.jQuery("#filter_search").val(""),techjoomla.jQuery("#adminForm").submit()}))}))},checkForAlpha:function(e,t){t=void 0===t?"":t;var o=0;for(o=0;o<e.value.length;o++){if("0"==e.value){alert(Joomla.JText._("COM_SOCIALADS_ZERO_VALUE_VALI_MSG")),e.value=e.value.substring(0,o);break}if((e.value.charCodeAt(o)<=47||e.value.charCodeAt(o)>=58||45==e.value.charCodeAt(o))&&t!=e.value.charCodeAt(o)){alert(Joomla.JText._("COM_SOCIALADS_NUMONLY_VALUE_VALI_MSG")),e.value=e.value.substring(0,o);break}}},ads:{selectAdStatus:function(e,t){var o=t.selectedIndex,a=t.options[o].value,n="";if(1==a&&(t.options[0].disabled=!0),2==a)n=saAdmin.ads.validatePrompt();if(null!=n)return document.getElementById("reason").value=n,document.getElementById("hidid").value=e,document.getElementById("hidstat").value=a,void Joomla.submitform("forms.save");var r=jQuery(t).data("oldvalue");return jQuery(t).val(r),jQuery(t).trigger("liszt:updated"),jQuery(t).trigger("chosen:updated"),!1},validatePrompt:function(){var e=prompt(Joomla.JText._("COM_SOCIALADS_ADS_STATUS_PROMPT_BOX"));if(e=e.trim(),console.log(e),""!=e)return e;saAdmin.ads.validatePrompt()},selectZoneIfNotExists:function(e,t){var o=t.selectedIndex,a=t.options[o].value;document.getElementById("hidid").value=e,document.getElementById("hidzone").value=a,Joomla.submitform("forms.updatezone")},submitButtonAction:function(e){if("forms.delete"==e){if(!1===confirm(Joomla.JText._("COM_SOCIALADS_ADS_DELETE_CONFIRM")))return!1;if(!1===confirm(Joomla.JText._("COM_SOCIALADS_ADS_AD_ORDER_DELETE_CONFIRM")))return!1}Joomla.submitform(e)}},adorders:{selectStatusOrder:function(e,t){if("RF"==document.getElementById("pstatus0").value&&!1===confirm(Joomla.JText._("COM_SOCIALADS_ADS_STATUS_REFUND_PROMPT_BOX")))return location.reload(),!1;if("E"==document.getElementById("pstatus0").value&&!1===confirm(Joomla.JText._("COM_SOCIALADS_ADS_STATUS_CANCEL_PROMPT_BOX")))return location.reload(),!1;var o=t.selectedIndex,a=t.options[o].value;document.getElementById("hidid").value=e,document.getElementById("hidstat").value=a,Joomla.submitform("adorders.save")}},campaigns:{submitButtonAction:function(e){if("campaigns.publish"==e||"campaigns.unpublish"==e)Joomla.submitform(e);else if("campaigns.delete"==e){if(1!=confirm(Joomla.JText._("COM_SOCIALADS_CAMPAIGNS_DELETE_CONFIRM")))return}else window.location="index.php?option=com_quick2cart&view=campaigns";document.adminForm;Joomla.submitform(e)}},coupon:{initCouponJs:function(){techjoomla.jQuery(document).ready((function(){techjoomla.jQuery(".alphaDecimalCheck").keyup((function(){saAdmin.checkForAlpha(this,46)}))}))},checkDates:function(){var e=document.getElementById("jform_exp_date").value;endDate=new Date(e),endDate.setHours(0,0,0,0);var t=new Date;return t.setHours(0,0,0,0),endDate<t?(alert(Joomla.JText._("COM_SOCIALADS_DATE_END_ERROR_MSG")),document.getElementById("jform_exp_date").value="",0):""!=document.getElementById("jform_exp_date").value?document.getElementById("jform_from_date").value>document.getElementById("jform_exp_date").value?(alert(Joomla.JText._("COM_SOCIALADS_DATE_ERROR_MSG")),document.getElementById("jform_exp_date").value="",0):1:void 0},checkMaxUses:function(){var e=document.getElementById("jform_max_use").value,t=document.getElementById("jform_max_per_user").value;return t&&e&&e<t?(alert(Joomla.JText._("COM_SOCIALADS_MAX_USES_ERROR_MSG")),0):1},submitButtonAction:function(e){if("coupon.apply"==e){var t=saAdmin.coupon.checkDates(),o=saAdmin.coupon.checkMaxUses();if(0===t||0===o)return!1;if(0===saAdmin.coupon.coupounDuplicateCheck())return!1}if("coupon.save"==e){t=saAdmin.coupon.checkDates(),o=saAdmin.coupon.checkMaxUses();if(0===t||0===o)return!1;if(0===saAdmin.coupon.coupounDuplicateCheck())return!1}if("coupon.save2new"==e){t=saAdmin.coupon.checkDates(),o=saAdmin.coupon.checkMaxUses();if(0===t||0===o)return!1;if(0===saAdmin.coupon.coupounDuplicateCheck())return!1}"coupon.cancel"==e||"coupon.cancel"!=e&&document.formvalidator.isValid(document.getElementById("coupon-form"))?Joomla.submitform(e,document.getElementById("coupon-form")):alert(Joomla.JText._("JGLOBAL_VALIDATION_FORM_FAILED"))},coupounDuplicateCheck:function(){var e=document.getElementById("jform_code").value,t=0;if(0==parseInt(cid))var o="index.php?option=com_sa&tmpl=component&task=coupon.getcode&selectedcode="+e;else o="index.php?option=com_sa&task=coupon.getselectcode&couponid="+cid+"&selectedcode="+e;if(jQuery.ajax({url:o,type:"GET",async:!1,success:function(e){if(1!=parseInt(e))return 1;alert(Joomla.JText._("COM_SOCIALADS_DUPLICATE_COUPON")),t=1}}),1===t)return 0}},coupons:{submitButtonAction:function(e){if("coupons.delete"==e&&!1===confirm(Joomla.JText._("COM_SOCIALADS_COUPONS_DELETE_CONFORMATION")))return!1;Joomla.submitform(e)}},dashboard:{initDashboardJs:function(){techjoomla.jQuery(document).ready((function(){saAdmin.dashboard.initBarChart(),saAdmin.dashboard.initDonutChart(),saAdmin.dashboard.showNewsFeeds(),techjoomla.jQuery("#btnRefresh").click((function(){saAdmin.dashboard.validatePeriodicDates()&&Joomla.submitform()}))}))},initBarChart:function(){saAdmin.ajax("index.php?option=com_sa&task=dashboard.getBarChartData","GET","",saAdmin.dashboard.drawBarChart)},drawBarChart:function(e){var t=0;techjoomla.jQuery.each(e,(function(e,o){if(o.amount>0)return t=1,!0})),0!=t&&(techjoomla.jQuery("#graph-monthly-sales-msg").hide(),Morris.Bar({element:"graph-monthly-sales",data:e,xkey:"month",ykeys:["amount"],labels:[Joomla.JText._("COM_SOCIALADS_AMOUNT")],barColors:["#428bca"],barRatio:.4,xLabelAngle:35,hideHover:"auto",resize:!0}))},initDonutChart:function(){var e={from:techjoomla.jQuery("#from").val(),to:techjoomla.jQuery("#to").val()};saAdmin.ajax("index.php?option=com_sa&task=dashboard.getDonutChartData","POST",e,saAdmin.dashboard.drawDonutChart)},drawDonutChart:function(e){0==e[0].porders&&0==e[0].corders&&0==e[0].rorders&&0==e[0].cancelled_orders||(techjoomla.jQuery("#donut-chart-msg").hide(),Morris.Donut({element:"donut-chart",data:[{label:Joomla.JText._("COM_SOCIALADS_PENDING_ORDERS"),value:e[0].porders},{label:Joomla.JText._("COM_SOCIALADS_CONFIRMED_ORDERS"),value:e[0].corders},{label:Joomla.JText._("COM_SOCIALADS_REJECTED_ORDERS"),value:e[0].rorders},{label:Joomla.JText._("COM_SOCIALADS_CANCELLED_ORDERS"),value:e[0].cancelled_orders}],colors:["#fefe00","#5cb85c","#ff0000","#f0ad4e"]}))},validatePeriodicDates:function(){fromDate=document.getElementById("from").value,toDate=document.getElementById("to").value,fromDate1=new Date(fromDate.toString()),toDate1=new Date(toDate.toString()),difference=toDate1-fromDate1,days=Math.round(difference/864e5),parseInt(days)<=0&&alert(Joomla.JText._("COM_SOCIALADS_DATE_ERROR_MSG_DASHBOARD"))},showNewsFeeds:function(){techjoomla.jQuery.ajax({beforeSend:function(){techjoomla.jQuery("#tj-dashboard-news").html('<div class="center"><div>&nbsp;</div><img src="../media/com_sa/images/ajax.gif"/></div>')},type:"GET",url:"index.php?option=com_sa&task=dashboard.getNewsFeeds",async:!0,dataType:"json",success:function(e){if(e){var t="",o=[Joomla.JText._("SUN"),Joomla.JText._("MON"),Joomla.JText._("TUE"),Joomla.JText._("WED"),Joomla.JText._("THU"),Joomla.JText._("FRI"),Joomla.JText._("SAT")],a=[Joomla.JText._("JANUARY_SHORT"),Joomla.JText._("FEBRUARY_SHORT"),Joomla.JText._("MARCH_SHORT"),Joomla.JText._("APRIL_SHORT"),Joomla.JText._("MAY_SHORT"),Joomla.JText._("JUNE_SHORT"),Joomla.JText._("JULY_SHORT"),Joomla.JText._("AUGUST_SHORT"),Joomla.JText._("SEPTEMBER_SHORT"),Joomla.JText._("OCTOBER_SHORT"),Joomla.JText._("NOVEMBER_SHORT"),Joomla.JText._("DECEMBER_SHORT")];t+="<div>&nbsp;</div>",t+='<div class="row">',t+='<div class="col-sm-12 col-md-12 col-lg-12 tj-news-items">',techjoomla.jQuery.each(e,(function(e,n){n.link=n.link+"?utm_source=clientinstallation&utm_medium=dashboard&utm_term=socialads&utm_content=newslink&utm_campaign=socialads_ci",t+='<div class="row tj-news-item">',t+='<div class="col-sm-4 col-md-5 col-lg-5 ">',t+='<time class="icon" datetime="'+n.date+'">';var r=new Date(n.date);t+="<em>"+o[r.getDay()]+"</em>",t+="<strong>"+a[r.getMonth()]+"</strong>",t+="<span>"+r.getDate()+"</span>",t+="</time>",t+="</div>",t+='<div class="col-sm-7 col-md-6 col-lg-6">',t+="<div>",t+='<a target="_blank" href="'+n.link+'">',t+=n.title,t+="</a>",t+="</div>",t+="<div>",t+='<br/><p class="sa-text-justify">',t+=n.text,t+="</p>",t+="</div>",t+="</div>",t+="</div>"})),t+="</div>",t+="</div>",techjoomla.jQuery("#tj-dashboard-news").html(t)}else techjoomla.jQuery("#tj-dashboard-news").html('<div>&nbsp;</div><span class="text text-danger">'+Joomla.JText._("COM_SOCIALADS_ERROR_LOADING_FEEDS")+"</span>")}})}},importfields:{numericRangeCheck:function(e,t,o){"numericrange"==e.value?(document.getElementById("row"+o+"[5]radios").style.display="none",document.getElementById("row"+o+"[5]noradios").style.display="block",document.getElementById("match["+t+"]").disabled=!1):(document.getElementById("row"+o+"[5]noradios").style.display="none",document.getElementById("row"+o+"[5]radios").style.display="block",document.getElementById("match["+t+"]").disabled=!0)},saveTargeting:function(){return 1==confirm(Joomla.JText._("COM_SOCIALADS_SOCIAL_TARGETING_CONFIG_JSMESSAGE"))&&(document.adminForm.task.value="importfields.save",document.adminForm.onsubmit(),document.adminForm.submit(),!0)},resetTargeting:function(){return 1==confirm(Joomla.JText._("COM_SOCIALADS_SOCIAL_TARGETING_CONFIG_JSMESSAGE1"))&&(document.adminForm.resetall.value="1",document.adminForm.task.value="importfields.save",document.adminForm.onsubmit(),document.adminForm.submit(),!0)},installTargetingPlugins:function(e){var t="#chk"+e.name;jQuery.ajax({url:"?option=com_sa&task=importfields.addcolumn&col_name="+e.name,type:"GET",dataType:"json",success:function(o){o&&("true"==o.inmessage&&(jQuery(e).attr("disabled",!0),jQuery("#message1"+e.name).append(o.smessage),jQuery(t).show("fast"),jQuery(t+" input:checkbox").each((function(){this.checked="checked"}))),"false"==o.inmessage&&(jQuery(e).attr("disabled",!0),jQuery("#message1"+e.name).append(o.smessage),jQuery(t).hide("fast"),jQuery(t+" input:checkbox").each((function(){this.checked=""}))))}})},submitImportfields:function(e){document.adminForm;return"importfields.reset"==e?1==confirm(Joomla.JText._("COM_SOCIALADS_SOCIAL_TARGETING_CONFIG_JSMESSAGE1"))&&(Joomla.submitform("importfields.save",document.getElementById("adminForm")),!0):"importfields.apply"==e?1==confirm(Joomla.JText._("COM_SOCIALADS_SOCIAL_TARGETING_CONFIG_JSMESSAGE"))&&(Joomla.submitform("importfields.save",document.getElementById("adminForm")),!0):void 0},formValidation:function(e){return!!document.formvalidator.isValid(e)&&(e.check.value=token,!0)}},campaign:{initCampaignJs:function(){techjoomla.jQuery(document).ready((function(){techjoomla.jQuery(".alphaDecimalCheck").keyup((function(){saAdmin.checkForAlpha(this,46)}))}))},campaignSubmitButton:function(e){if("campaign.cancel"==e)Joomla.submitform(e,document.getElementById("campaign-form"));else{var t=jQuery("#jform_start_date").val(),o=jQuery("#jform_end_date").val();if(t&&o&&t>o)return alert(Joomla.JText._("COM_SOCIALADS_START_DATE_MUST_BE_LESS_FROM_END_DATE")),!1;"campaign.cancel"!=e&&document.formvalidator.isValid(document.getElementById("campaign-form"))?Joomla.submitform(e,document.getElementById("campaign-form")):alert(Joomla.JText._("JGLOBAL_VALIDATION_FORM_FAILED"))}}},orders:{selectStatusOrder:function(e,t){if("RF"==document.getElementById("pstatus0").value&&!1===confirm(Joomla.JText._("COM_SOCIALADS_ADS_STATUS_REFUND_PROMPT_BOX")))return location.reload(),!1;if("E"==document.getElementById("pstatus0").value&&!1===confirm(Joomla.JText._("COM_SOCIALADS_ADS_STATUS_CANCEL_PROMPT_BOX")))return location.reload(),!1;var o=t.selectedIndex,a=t.options[o].value;document.getElementById("hidid").value=e,document.getElementById("hidstat").value=a,Joomla.submitform("orders.save")}},zone:{zoneAdTypes:function(e){if("text"==e)techjoomla.jQuery("#max_title").show(),techjoomla.jQuery("#max_des").show(),techjoomla.jQuery("#layout_row").show(),techjoomla.jQuery("#img_width").hide(),techjoomla.jQuery("#img_height").hide(),techjoomla.jQuery("#img_width_ratio").hide(),techjoomla.jQuery("#img_height_ratio").hide(),(t=document.getElementById("layout")).value="",techjoomla.jQuery("#jform_img_height").removeAttr("required"),techjoomla.jQuery("#jform_img_width").removeAttr("required"),techjoomla.jQuery("#jform_img_height").removeClass("required"),techjoomla.jQuery("#jform_img_width").removeClass("required"),techjoomla.jQuery("#jform_img_height_ratio").removeAttr("required"),techjoomla.jQuery("#jform_img_width_ratio").removeAttr("required"),techjoomla.jQuery("#jform_img_height_ratio").removeClass("required"),techjoomla.jQuery("#jform_img_width_ratio").removeClass("required"),techjoomla.jQuery("#jform_max_title").attr("required",!0),techjoomla.jQuery("#jform_max_des").attr("required",!0);else if("media"==e||"html5_zip"==e){techjoomla.jQuery("#img_width").show(),techjoomla.jQuery("#img_height").show(),techjoomla.jQuery("#img_width_ratio").show(),techjoomla.jQuery("#img_height_ratio").show(),techjoomla.jQuery("#max_title").hide(),techjoomla.jQuery("#max_des").hide(),(t=document.getElementById("layout")).value="",techjoomla.jQuery("#jform_max_title").removeAttr("required"),techjoomla.jQuery("#jform_max_des").removeAttr("required"),techjoomla.jQuery("#jform_max_title").removeClass("required"),techjoomla.jQuery("#jform_max_des").removeClass("required"),techjoomla.jQuery("#jform_img_height").attr("required",!0),techjoomla.jQuery("#jform_img_width").attr("required",!0),techjoomla.jQuery("#jform_img_height_ratio").attr("required",!0),techjoomla.jQuery("#jform_img_width_ratio").attr("required",!0)}else if("text_media"==e){techjoomla.jQuery("#max_title").show(),techjoomla.jQuery("#max_des").show(),techjoomla.jQuery("#img_height").show(),techjoomla.jQuery("#img_width").show(),techjoomla.jQuery("#img_width_ratio").show(),techjoomla.jQuery("#img_height_ratio").show();var t=techjoomla.jQuery("#layout");document.getElementById("layout_row").style.display="",t.value="",techjoomla.jQuery("#jform_max_title").attr("required",!0),techjoomla.jQuery("#jform_max_des").attr("required",!0),techjoomla.jQuery("#jform_img_height").attr("required",!0),techjoomla.jQuery("#jform_img_width").attr("required",!0),techjoomla.jQuery("#jform_img_height_ratio").attr("required",!0),techjoomla.jQuery("#jform_img_width_ratio").attr("required",!0)}},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getvalue:function(e,t){if(null==e)return null;if(e.value)return e.value;if(e.length)if(e.options){if(-1!=e.selectedIndex)return e.options[e.selectedIndex].value}else for(var o=0;o<e.length;o++)if(e[o].checked)return e[o].value;return t},populatelayout:function(){document.getElementById("layout").value;var e;e=techjoomla.jQuery("[name=layout_select]:checkbox:checked").length;var t=[];return techjoomla.jQuery("[name=layout_select]:checkbox:checked").each((function(){t.push(techjoomla.jQuery(this).val())})),techjoomla.jQuery("#layout").val(t),e},yesnoToggle:function(e){var t=techjoomla.jQuery(e).attr("for");techjoomla.jQuery("#"+t).attr("checked","checked"),techjoomla.jQuery("#"+t).prop("checked",!0);var o=techjoomla.jQuery("#"+t).val();techjoomla.jQuery("#"+t).attr("name");return techjoomla.jQuery(e).parent().find("label").removeClass("btn-success").removeClass("btn-danger"),1==o&&techjoomla.jQuery(e).addClass("btn-success"),0==o&&techjoomla.jQuery(e).addClass("btn-danger"),o},codechanger:function(e){var t="";if("target"==e&&(t='<script>\n var Ad_widget_sitebase = "'+saWidgetSiteRootUrl+'";\n',techjoomla.jQuery("#field_target :input").length&&(wid_code2="",techjoomla.jQuery("#field_target :input").each((function(e){if(fname=techjoomla.jQuery(this).attr("name"),fval=saAdmin.zone.getvalue(this,""),""!=fval){var t=fname.split("][")[1].split(",");"]"==t[0].charAt(t[0].length-1)&&(t[0]=t[0].substr(0,t[0].length-1)),wid_code2+=t[0]+' : "'+fval+'",'}})),""!==wid_code2&&(wid_code2=wid_code2.substring(0,wid_code2.length-1),t+="var Ad_targeting = {\n",t+="social_params : {",t+=wid_code2,t+="}\n};\n")),t+="<\/script>",document.getElementById("wid_code").innerHTML=t),"widget"==e){t="<script>\n",t+="var Ad_widget = {\n";var o="sa_ads"+Math.floor(50*Math.random());t+='ad_unit : "'+o+'",\n',t+="zone : "+saWidgetZoneId+",\n",t+="num_ads : "+saAdmin.zone.getvalue(document.adminForm.num_ads,2)+",\n",t+="ad_rotation : ","1"==saAdmin.zone.getvalue(document.adminForm.rotate,0)?(t+="1,\n",t+="ad_rotation_delay : "+saAdmin.zone.getvalue(document.adminForm.rotate_delay,10)+",\n"):t+="0,\n",t+="no_rand : ","1"==saAdmin.zone.getvalue(document.adminForm.rand,0)?t+="1\n":t+="0\n",t+="};\n",t+="<\/script>\n",t+='<div id="'+o+'"></div>\n',t+='<script type="text/javascript" src="'+widgetUrl,(document.getElementById("if_ht").value||document.getElementById("if_wid").value||"1"==saAdmin.zone.getvalue(document.adminForm.if_seam,0))&&(t+="&",document.getElementById("if_ht").value&&(t+="ifheight="+document.getElementById("if_ht").value+"&"),document.getElementById("if_wid").value&&(t+="ifwidth="+document.getElementById("if_wid").value+"&"),"1"==saAdmin.zone.getvalue(document.adminForm.if_seam,0)&&(t+="ifseamless="+saAdmin.zone.getvalue(document.adminForm.if_seam,0)+"&"),t=t.substring(0,t.length-1)),t+='">',t+="<\/script>",t+="\n",t+='<script type="text/javascript" >',t+="\n// browser compatibility: get method for event ",t+="\n// addEventListener(FF, Webkit, Opera, IE9+) and attachEvent(IE5-8) ",t+='\nvar myEventMethod = window.addEventListener ? "addEventListener" : "attachEvent" ',t+="\n// create event listener",t+="\n var myEventListener = window[myEventMethod]; ",t+="\n// browser compatibility: attach event uses onmessage",t+='\nvar myEventMessage = myEventMethod == "attachEvent" ? "onmessage" : "message"; ',t+="\n// register callback function on incoming message",t+="\nmyEventListener(myEventMessage, function (e) { ",t+="\n\t// we will get a string (better browser support) and validate ",t+="\n\t// if it is an int - set the height of the iframe #my-iframe-id ",t+="\n\tif (e.data === parseInt(e.data)) ",t+='\n\t\tdocument.getElementById("idIframe_'+o+'").height = e.data + "px"; ',t+="\n}, false); ",t+="\n",t+="<\/script>",document.getElementById("widunit_code").innerHTML=t}},validateFields:function(e){if("zone.cancel"==e)Joomla.submitform(e,document.getElementById("adminForm"));else if("zone.cancel"!=e&&document.formvalidator.isValid(document.getElementById("adminForm"))){var t=document.adminForm,o=t.jform_ad_type,a=o.options[o.selectedIndex].value,n=(t.jform_zone_type,0);if("text"==a){if(document.getElementById("validate_img_width").innerHTML="",document.getElementById("validate_img_height").innerHTML="",""==saAdmin.zone.trim(t.jform_max_title.value))return document.getElementById("validate_max_title").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_MUST_PROVIDE_A_MAX_TITLE_CHAR"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_max_title.value))||0==parseInt(t.jform_max_title.value))return document.getElementById("validate_max_title").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if(""==saAdmin.zone.trim(t.jform_max_des.value))return document.getElementById("validate_max_des").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_MUST_PROVIDE_A_MAX_DESC_CHAR"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_max_des.value))||0==parseInt(t.jform_max_des.value))return document.getElementById("validate_max_des").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1}if("media"==a)if(document.getElementById("validate_max_title").innerHTML="",document.getElementById("validate_max_des").innerHTML="","0"==jQuery('input[name="jform[use_image_ratio]"]:checked').val()){if(""==saAdmin.zone.trim(t.jform_img_width.value))return document.getElementById("validate_img_width").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_WIDTH"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_width.value))||0==parseInt(t.jform_img_width.value))return document.getElementById("validate_img_width").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if(""==saAdmin.zone.trim(t.jform_img_height.value))return document.getElementById("validate_img_height").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_HEIGHT"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_height.value))||0==parseInt(t.jform_img_height.value))return document.getElementById("validate_img_height").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1}else{if(""==saAdmin.zone.trim(t.jform_img_width_ratio.value))return document.getElementById("validate_img_width_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_WIDTH_RATIO"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_width_ratio.value))||0==parseInt(t.jform_img_width_ratio.value))return document.getElementById("validate_img_width_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if(""==saAdmin.zone.trim(t.jform_img_height_ratio.value))return document.getElementById("validate_img_height_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_HEIGHT_RATIO"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_height_ratio.value))||0==parseInt(t.jform_img_height_ratio.value))return document.getElementById("validate_img_height_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1}if("text_media"==a){if(document.getElementById("validate_img_width").innerHTML="",document.getElementById("validate_img_height").innerHTML="",document.getElementById("validate_max_title").innerHTML="",document.getElementById("validate_max_des").innerHTML="",""==saAdmin.zone.trim(t.jform_max_title.value))return document.getElementById("validate_max_title").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_MUST_PROVIDE_A_MAX_TITLE_CHAR"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_max_title.value))||0==parseInt(t.jform_max_title.value))return document.getElementById("validate_max_title").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if(""==saAdmin.zone.trim(t.jform_max_des.value))return document.getElementById("validate_max_des").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_MUST_PROVIDE_A_MAX_DESC_CHAR"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_max_des.value))||0==parseInt(t.jform_max_des.value))return document.getElementById("validate_max_des").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if("0"==jQuery('input[name="jform[use_image_ratio]"]:checked').val()){if(""==saAdmin.zone.trim(t.jform_img_width.value))return document.getElementById("validate_img_width").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_WIDTH"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_width.value))||0==parseInt(t.jform_img_width.value))return document.getElementById("validate_img_width").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if(""==saAdmin.zone.trim(t.jform_img_height.value))return document.getElementById("validate_img_height").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_HEIGHT"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_height.value))||0==parseInt(t.jform_img_height.value))return document.getElementById("validate_img_height").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1}else{if(""==saAdmin.zone.trim(t.jform_img_width_ratio.value))return document.getElementById("validate_img_width_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_WIDTH_RATIO"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_width_ratio.value))||0==parseInt(t.jform_img_width_ratio.value))return document.getElementById("validate_img_width_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1;if(""==saAdmin.zone.trim(t.jform_img_height_ratio.value))return document.getElementById("validate_img_height_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_YOU_PROVIDE_A_IMG_HEIGHT_RATIO"),n=1,!1;if(isNaN(saAdmin.zone.trim(t.jform_img_height_ratio.value))||0==parseInt(t.jform_img_height_ratio.value))return document.getElementById("validate_img_height_ratio").innerHTML=Joomla.JText._("COM_SOCIALADS_VALIDATE_NON_ZERO_NUMERIC"),n=1,!1}}return!!n||(0==recordsCount||1==confirm(Joomla.JText._("COM_SOCIALADS_ZONE_MSG_ON_EDIT_ZONE")))}},useImageRatioToggle:function(e){"text"!=jQuery("#jform_ad_type").val()&&("1"==jQuery('input[name="jform[use_image_ratio]"]:checked').val()?(techjoomla.jQuery("#img_width").hide(),techjoomla.jQuery("#img_height").hide(),techjoomla.jQuery("#jform_img_height").removeAttr("required"),techjoomla.jQuery("#jform_img_width").removeAttr("required"),techjoomla.jQuery("#jform_img_height").removeClass("required"),techjoomla.jQuery("#jform_img_width").removeClass("required"),techjoomla.jQuery("#img_height_ratio").show(),techjoomla.jQuery("#img_width_ratio").show(),techjoomla.jQuery("#jform_img_height_ratio").attr("required",!0),techjoomla.jQuery("#jform_img_width_ratio").attr("required",!0)):(techjoomla.jQuery("#img_height").show(),techjoomla.jQuery("#img_width").show(),techjoomla.jQuery("#jform_img_height").attr("required",!0),techjoomla.jQuery("#jform_img_width").attr("required",!0),techjoomla.jQuery("#img_width_ratio").hide(),techjoomla.jQuery("#img_height_ratio").hide(),techjoomla.jQuery("#jform_img_height_ratio").removeAttr("required"),techjoomla.jQuery("#jform_img_width_ratio").removeAttr("required"),techjoomla.jQuery("#jform_img_height_ratio").removeClass("required"),techjoomla.jQuery("#jform_img_width_ratio").removeClass("required")))}},zones:{submitButtonAction:function(e){if(cnt=0,"zones.delete"==e){for(i=0;i<cblength;i++)if(1==document.getElementById("cb"+i).checked){var t=document.getElementById("no_of_ads"+i).value;if(parseInt(t))return alert(Joomla.JText._("COM_SOCIALADS_ZONE_DEL_NOT_ABLE_TO_DELETE")),void techjoomla.jQuery("#cb"+i).attr("checked",!1);if(!1===confirm(Joomla.JText._("COM_SOCIALADS_ZONE_DEL_SURE_MSG")))return;return void Joomla.submitform(e)}}else Joomla.submitform(e)}}};function jSelectUser_jform_created_by(e,t){document.getElementById("ad_creator_id").value!=e&&(document.getElementById("ad_creator_id").value=e,document.getElementById("ad_creator_name").value=t),SqueezeBox.close()}function getFormattedPrice(e,t){return currencyDisplayFormat=sa_json_config.currency_display_format,currencyDisplayFormat=currencyDisplayFormat.replace("{AMOUNT}"," "+e),currencyDisplayFormat=currencyDisplayFormat.replace("{CURRENCY_SYMBOL}"," "+t),currencyDisplayFormat}function showCampaignDetails(e){var t=document.getElementById("campaignDetails");if(t.style.display="block",document.getElementById("ad_campaign").value,t.innerHTML="",e&&campaigns){var o=campaigns.find((t=>t.id==e));if(o){const e=o.start_date?o.start_date:" - ",a=o.end_date?o.end_date:" - ",n=document.getElementById("backendCampInfo");t.innerHTML=`<div class="campaign-info campaign-details ${n?"ml-18":""}">\n\t\t\t\t\t<p><strong>${Joomla.JText._("COM_SOCIALADS_DAILY_BUDGET")}</strong> ${o.daily_budget}</p>\n\t\t\t\t\t<p><strong>${Joomla.JText._("COM_SOCIALADS_START_DATE")}</strong> ${e}</p>\n\t\t\t\t\t<p><strong>${Joomla.JText._("COM_SOCIALADS_END_DATE")}</strong> ${a}</p>\n\t\t\t\t</div>`}else t.innerHTML=`<p class="text-danger">${Joomla.JText._("COM_SOCIALADS_DEFAULT_MSG")}</p>`}else t.innerHTML=`<p class="ml-18 text-danger">${Joomla.JText._("COM_SOCIALADS_DEFAULT_MSG")}</p>`}function checkSuperUser(){var e=techjoomla.jQuery("#adsform #ad_creator_id_id").val();e&&techjoomla.jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_sa&task=create.getUserType&user="+e+"&tmpl=component",type:"POST",async:!1,data:{user:e},dataType:"json",success:function(e){1==e.hasUnlimitedAdPermssion?techjoomla.jQuery("#adsform .unlimitedAdrow").removeClass("d-none"):techjoomla.jQuery("#adsform .unlimitedAdrow").addClass("d-none"),1==e.hasAffiliateAdPermssion?(techjoomla.jQuery("#adsform #altadbutton").prop("disabled",!1),techjoomla.jQuery("#adsform #adtype option[value='affiliate']").length>0&&techjoomla.jQuery("#adsform #adtype").val(""),document.querySelectorAll("#adsform #adtype option").forEach((e=>{"affiliate"==e.value&&(e.disabled=!1)}))):(techjoomla.jQuery("#adsform #altadbutton").prop("disabled",!0),techjoomla.jQuery("#adsform #altadbutton").prop("checked",!1),document.querySelectorAll("#adsform #adtype option").forEach((e=>{"affiliate"==e.value&&(e.disabled=!0)})))},error:function(e,t,o){}})}Joomla.orderTable=function(){table=document.getElementById("sortTable"),direction=document.getElementById("directionTable"),order=table.options[table.selectedIndex].value,order!=tjListOrderingColumn?dirn="asc":dirn=direction.options[direction.selectedIndex].value,Joomla.tableOrdering(order,dirn,"")},loadingImage=function(){techjoomla.jQuery('<div id="appsloading"></div>').css("background","rgba(255, 255, 255, .8) url('"+root_url+"media/com_sa/images/ajax.gif') 50% 15% no-repeat").css("top",techjoomla.jQuery("#TabConetent").position().top-techjoomla.jQuery(window).scrollTop()).css("left",techjoomla.jQuery("#TabConetent").position().left-techjoomla.jQuery(window).scrollLeft()).css("width",techjoomla.jQuery("#TabConetent").width()).css("height",techjoomla.jQuery("#TabConetent").height()).css("position","fixed").css("z-index","1000").css("opacity","0.80").css("-ms-filter","progid:DXImageTransform.Microsoft.Alpha(Opacity = 80)").css("filter","alpha(opacity = 80)").appendTo("#TabConetent")},hideImage=function(){techjoomla.jQuery("#appsloading").remove()},techjoomla.jQuery(document).ready((function(){checkSuperUser(),techjoomla.jQuery("#adsform #ad_creator_id_id").attr("onchange","checkSuperUser()"),techjoomla.jQuery("#sa-payment #amount").length&&techjoomla.jQuery("#sa-payment #amount").change((function(){if(techjoomla.jQuery('#sa-payment [name="ad_gateways"]:checked').length){var e=techjoomla.jQuery('#sa-payment [name="ad_gateways"]:checked').val();techjoomla.jQuery('#sa-payment input[name="ad_gateways"][value="'+e+'"]').trigger("click")}}))}));