function sa_init(e,t,a,i=""){var d=jQuery(e).attr("preview_for"),n=jQuery(e).parent().attr("havezone"),r=jQuery(e).find(".adtype").attr("adtype");"video"!=r?i?setTimeout(function(){jQuery(e).show(decideToRotate(d,n,t,r,a))},1e3):jQuery(e).show(decideToRotate(d,n,t,r,a)):-1!=flowplayer("vid_player_"+d).getState()?setTimeout(function(){decideToRotate(d,n,t,r,a)},5e3):flowplayer("vid_player_"+d).onLoad(function(){setTimeout(function(){decideToRotate(d,n,t,r,a)},5e3)})}function decideToRotate(e,t,a,i,d){var n=jQuery("div[preview_for="+e+"]"),r=jQuery(n).attr("ad_entry_number");if("video"==i){var o=flowplayer("vid_player_"+e).getState(),s=r*d*1e3;if(4==o||-1==o)var s=r*d*1e3;else if(3==o)var s=flowplayer("vid_player_"+e).getClip().fullDuration}else var s=1e3*d;getAdForSwitch(n,t,a,e,s,r,i,d)}function getAdForSwitch(e,t,a,i,d,n,r,o){var s=0;countdown=setTimeout(async function(){try{jQuery(e).is(":hover")&&(s=1)}catch(d){}if("video"==r&&3==flowplayer("vid_player_"+i).getState()&&(s=1),1==s)sa_init(e,a,o);else{var c=await checkIfAdsAvailable(i,t,a);if(c){if(c.ad_id)var f=await getAdHtml(c.ad_id,a);else f=c.adHTML,c=c.check;if(jQuery(e).parent().hasClass("ad_rotate_with_transition")){jQuery(f).insertBefore(e);var l=jQuery('div[preview_for="'+c.ad_id+'"]');jQuery(l).attr("ad_entry_number",n),sa_init(l,a,o,1),jQuery(l).addClass("rotateAds"),jQuery(e).addClass("transparent"),setTimeout(function(){jQuery(e).remove()},1e3)}else jQuery(e).fadeOut(2e3,function(){jQuery(e).replaceWith(f),jQuery('div[preview_for="'+c.ad_id+'"]').fadeIn(2e3,function(){var e=jQuery('div[preview_for="'+c.ad_id+'"]');jQuery(e).attr("ad_entry_number",n),sa_init(e,a,o),jQuery(e).addClass("rotateAds")})})}}},d)}async function checkIfAdsAvailable(e,t,a){var i="";return jQuery.ajax({type:"get",url:site_link+"index.php?option=com_sa&task=render.checkIfAdsAvailable&ad_id="+e+"&zone_id="+t+"&module_id="+a+"&checkAdAndGethtml=1",async:!1,dataType:"json",success:function(e){null!=e&&(i=e)}}),i}async function getAdHtml(e,t){var a="";return(xhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET",site_link+"index.php?option=com_sa&task=render.getAdHtml&ad_id="+e+"&module_id="+t,!1),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("ad_id="+e+"&module_id="+t),a=xhttp.responseText}